<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化 | ゼロツー</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.jpg">
    <meta name="description" content="zerotwo">
    <link rel="preload" href="/assets/css/0.styles.f0b7ee7d.css" as="style"><link rel="preload" href="/assets/js/app.484f4375.js" as="script"><link rel="preload" href="/assets/js/2.ebbe98b4.js" as="script"><link rel="preload" href="/assets/js/99.d91a7a9f.js" as="script"><link rel="prefetch" href="/assets/js/10.91de1805.js"><link rel="prefetch" href="/assets/js/100.1772503e.js"><link rel="prefetch" href="/assets/js/101.b569a1af.js"><link rel="prefetch" href="/assets/js/102.65dffa11.js"><link rel="prefetch" href="/assets/js/103.d7a8cd9e.js"><link rel="prefetch" href="/assets/js/104.0a0e3708.js"><link rel="prefetch" href="/assets/js/105.15bc167a.js"><link rel="prefetch" href="/assets/js/106.8487cf9a.js"><link rel="prefetch" href="/assets/js/107.2310b94b.js"><link rel="prefetch" href="/assets/js/108.781b7ebe.js"><link rel="prefetch" href="/assets/js/109.6225704a.js"><link rel="prefetch" href="/assets/js/11.9c44c6b2.js"><link rel="prefetch" href="/assets/js/110.3c39cb3c.js"><link rel="prefetch" href="/assets/js/111.22bede53.js"><link rel="prefetch" href="/assets/js/112.acb6b722.js"><link rel="prefetch" href="/assets/js/113.c2b6115e.js"><link rel="prefetch" href="/assets/js/114.cbeddf77.js"><link rel="prefetch" href="/assets/js/115.adf2d1b9.js"><link rel="prefetch" href="/assets/js/116.3f23eb5b.js"><link rel="prefetch" href="/assets/js/117.00cb8ac3.js"><link rel="prefetch" href="/assets/js/118.e88e1cfb.js"><link rel="prefetch" href="/assets/js/119.213aaa9b.js"><link rel="prefetch" href="/assets/js/12.878aa51b.js"><link rel="prefetch" href="/assets/js/120.fc12eb0e.js"><link rel="prefetch" href="/assets/js/121.67bafb52.js"><link rel="prefetch" href="/assets/js/122.cca49856.js"><link rel="prefetch" href="/assets/js/123.0e27eb9e.js"><link rel="prefetch" href="/assets/js/124.53383547.js"><link rel="prefetch" href="/assets/js/125.e103d7f1.js"><link rel="prefetch" href="/assets/js/126.adb34a41.js"><link rel="prefetch" href="/assets/js/127.f352dcec.js"><link rel="prefetch" href="/assets/js/128.9aa22460.js"><link rel="prefetch" href="/assets/js/129.02dabe8a.js"><link rel="prefetch" href="/assets/js/13.b4c5b1dd.js"><link rel="prefetch" href="/assets/js/130.7d88cb43.js"><link rel="prefetch" href="/assets/js/14.dce5d003.js"><link rel="prefetch" href="/assets/js/15.ec0f3b1f.js"><link rel="prefetch" href="/assets/js/16.a9597b38.js"><link rel="prefetch" href="/assets/js/17.c8f44f51.js"><link rel="prefetch" href="/assets/js/18.67e67934.js"><link rel="prefetch" href="/assets/js/19.2b8ea36f.js"><link rel="prefetch" href="/assets/js/20.ee5ab76e.js"><link rel="prefetch" href="/assets/js/21.1582f8ed.js"><link rel="prefetch" href="/assets/js/22.130fb5fa.js"><link rel="prefetch" href="/assets/js/23.ecbb4b5d.js"><link rel="prefetch" href="/assets/js/24.0c8b3ecd.js"><link rel="prefetch" href="/assets/js/25.4aae22ea.js"><link rel="prefetch" href="/assets/js/26.4816aa3d.js"><link rel="prefetch" href="/assets/js/27.2e6f0659.js"><link rel="prefetch" href="/assets/js/28.7e0fef24.js"><link rel="prefetch" href="/assets/js/29.dad88d85.js"><link rel="prefetch" href="/assets/js/3.5e8d6a69.js"><link rel="prefetch" href="/assets/js/30.1ecf79ca.js"><link rel="prefetch" href="/assets/js/31.0a97fafc.js"><link rel="prefetch" href="/assets/js/32.8e6151d1.js"><link rel="prefetch" href="/assets/js/33.b5ff95d1.js"><link rel="prefetch" href="/assets/js/34.0d03faf5.js"><link rel="prefetch" href="/assets/js/35.6d4b4665.js"><link rel="prefetch" href="/assets/js/36.b42cbedf.js"><link rel="prefetch" href="/assets/js/37.4de10dce.js"><link rel="prefetch" href="/assets/js/38.9031eb30.js"><link rel="prefetch" href="/assets/js/39.daee868f.js"><link rel="prefetch" href="/assets/js/4.ceb8a314.js"><link rel="prefetch" href="/assets/js/40.df374a26.js"><link rel="prefetch" href="/assets/js/41.563436c6.js"><link rel="prefetch" href="/assets/js/42.b9200ca4.js"><link rel="prefetch" href="/assets/js/43.40ae12a3.js"><link rel="prefetch" href="/assets/js/44.4a0dd48e.js"><link rel="prefetch" href="/assets/js/45.20d657cc.js"><link rel="prefetch" href="/assets/js/46.2d34fe10.js"><link rel="prefetch" href="/assets/js/47.3dcb2d38.js"><link rel="prefetch" href="/assets/js/48.1b0959df.js"><link rel="prefetch" href="/assets/js/49.6652f2b2.js"><link rel="prefetch" href="/assets/js/5.b28c76e0.js"><link rel="prefetch" href="/assets/js/50.30bdc802.js"><link rel="prefetch" href="/assets/js/51.ebe5930a.js"><link rel="prefetch" href="/assets/js/52.02f2caf4.js"><link rel="prefetch" href="/assets/js/53.55df3fc5.js"><link rel="prefetch" href="/assets/js/54.e2bff3b5.js"><link rel="prefetch" href="/assets/js/55.c859c458.js"><link rel="prefetch" href="/assets/js/56.d493a61b.js"><link rel="prefetch" href="/assets/js/57.9af46dbf.js"><link rel="prefetch" href="/assets/js/58.46d4e8aa.js"><link rel="prefetch" href="/assets/js/59.82e453fe.js"><link rel="prefetch" href="/assets/js/6.b43fc5c2.js"><link rel="prefetch" href="/assets/js/60.d9652552.js"><link rel="prefetch" href="/assets/js/61.bad1d82a.js"><link rel="prefetch" href="/assets/js/62.8c307334.js"><link rel="prefetch" href="/assets/js/63.7ebafb7e.js"><link rel="prefetch" href="/assets/js/64.bc588101.js"><link rel="prefetch" href="/assets/js/65.6f66d6a2.js"><link rel="prefetch" href="/assets/js/66.ee6f0d41.js"><link rel="prefetch" href="/assets/js/67.0002a9a5.js"><link rel="prefetch" href="/assets/js/68.4a86ea26.js"><link rel="prefetch" href="/assets/js/69.c9e36070.js"><link rel="prefetch" href="/assets/js/7.87b3f924.js"><link rel="prefetch" href="/assets/js/70.40af8c94.js"><link rel="prefetch" href="/assets/js/71.ee207bd6.js"><link rel="prefetch" href="/assets/js/72.c389068e.js"><link rel="prefetch" href="/assets/js/73.c1526d9c.js"><link rel="prefetch" href="/assets/js/74.cd1c9d32.js"><link rel="prefetch" href="/assets/js/75.144c1f5b.js"><link rel="prefetch" href="/assets/js/76.4c36bfbf.js"><link rel="prefetch" href="/assets/js/77.7db5b3f1.js"><link rel="prefetch" href="/assets/js/78.de99e748.js"><link rel="prefetch" href="/assets/js/79.1febcdca.js"><link rel="prefetch" href="/assets/js/8.ab13bda4.js"><link rel="prefetch" href="/assets/js/80.e802c8bb.js"><link rel="prefetch" href="/assets/js/81.960e4a52.js"><link rel="prefetch" href="/assets/js/82.9a35963d.js"><link rel="prefetch" href="/assets/js/83.005e1aad.js"><link rel="prefetch" href="/assets/js/84.d61f7f01.js"><link rel="prefetch" href="/assets/js/85.0906b75c.js"><link rel="prefetch" href="/assets/js/86.dff86ecd.js"><link rel="prefetch" href="/assets/js/87.00755e79.js"><link rel="prefetch" href="/assets/js/88.00604a67.js"><link rel="prefetch" href="/assets/js/89.376832c9.js"><link rel="prefetch" href="/assets/js/9.b83e9e02.js"><link rel="prefetch" href="/assets/js/90.9be39541.js"><link rel="prefetch" href="/assets/js/91.d5eb29c9.js"><link rel="prefetch" href="/assets/js/92.9f5fba68.js"><link rel="prefetch" href="/assets/js/93.670dcf5c.js"><link rel="prefetch" href="/assets/js/94.9d783387.js"><link rel="prefetch" href="/assets/js/95.0fd08cc1.js"><link rel="prefetch" href="/assets/js/96.ae0eb4f1.js"><link rel="prefetch" href="/assets/js/97.1d15ea38.js"><link rel="prefetch" href="/assets/js/98.1bc97ef6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f0b7ee7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./favicon.jpg" alt="ゼロツー" class="logo"> <span class="site-name can-hide">ゼロツー</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/frontend/mobile/" class="nav-link">
  移动端
</a></li><li class="dropdown-item"><!----> <a href="/frontend/ts/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/node/" class="nav-link">
  NODE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/native/" class="nav-link">
  原生开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其余" class="dropdown-title"><span class="title">其余</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/computerNetwork/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/frontend/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend/performance/" class="nav-link router-link-active">
  性能
</a></li><li class="dropdown-item"><!----> <a href="/frontend/safety/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/frontend/axios/" class="nav-link">
  axios
</a></li><li class="dropdown-item"><!----> <a href="/frontend/API/" class="nav-link">
  api
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码" class="dropdown-title"><span class="title">代码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/code/" class="nav-link">
  手写源码
</a></li><li class="dropdown-item"><!----> <a href="/frontend/algorithm/" class="nav-link">
  编码和算法
</a></li><li class="dropdown-item"><!----> <a href="/frontend/leetcode/" class="nav-link">
  leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/others/" class="nav-link">
  开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/" class="nav-link">
  os
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  md
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/view/" class="nav-link">
  view
</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">
  server
</a></li><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  guide
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/frontend/mobile/" class="nav-link">
  移动端
</a></li><li class="dropdown-item"><!----> <a href="/frontend/ts/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/node/" class="nav-link">
  NODE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/native/" class="nav-link">
  原生开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其余" class="dropdown-title"><span class="title">其余</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/computerNetwork/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/frontend/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend/performance/" class="nav-link router-link-active">
  性能
</a></li><li class="dropdown-item"><!----> <a href="/frontend/safety/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/frontend/axios/" class="nav-link">
  axios
</a></li><li class="dropdown-item"><!----> <a href="/frontend/API/" class="nav-link">
  api
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码" class="dropdown-title"><span class="title">代码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/code/" class="nav-link">
  手写源码
</a></li><li class="dropdown-item"><!----> <a href="/frontend/algorithm/" class="nav-link">
  编码和算法
</a></li><li class="dropdown-item"><!----> <a href="/frontend/leetcode/" class="nav-link">
  leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/others/" class="nav-link">
  开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/" class="nav-link">
  os
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  md
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/view/" class="nav-link">
  view
</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">
  server
</a></li><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  guide
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>performance</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/performance/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/frontend/performance/performance.html" aria-current="page" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#性能优化措施" class="sidebar-link">性能优化措施</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#结合输入-url-到-渲染页面" class="sidebar-link">结合输入 URL 到 渲染页面</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#避免css-import" class="sidebar-link">避免css @import</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#图片懒加载" class="sidebar-link">图片懒加载⭐️</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#虚拟列表" class="sidebar-link">虚拟列表⭐️</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#无限列表" class="sidebar-link">无限列表</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#渲染优化。。。" class="sidebar-link">渲染优化。。。</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#为什么执行js会暂停ui渲染？" class="sidebar-link">为什么执行JS会暂停UI渲染？</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#什么情况下引起重排和重绘，color会不会，margin会不会，font-size会不会" class="sidebar-link">什么情况下引起重排和重绘，color会不会，margin会不会，font-size会不会</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#scroll应该用防抖还是节流" class="sidebar-link">scroll应该用防抖还是节流</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#dns预处理，为什么要做dns预处理，如何实现" class="sidebar-link">DNS预处理，为什么要做DNS预处理，如何实现</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#cdn" class="sidebar-link">CDN</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#如何减少传输体积" class="sidebar-link">如何减少传输体积</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#怎么判断资源是否加载完毕，包括图片、视频、音频" class="sidebar-link">怎么判断资源是否加载完毕，包括图片、视频、音频</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#在页面上向列表中插入100000个dom元素，for循环100000次，每次插入一个，发现性能方面的问题，怎么优化" class="sidebar-link">在页面上向列表中插入100000个Dom元素，for循环100000次，每次插入一个，发现性能方面的问题，怎么优化</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#如果一个十万级的大数据要如何进行加载？" class="sidebar-link">如果一个十万级的大数据要如何进行加载？</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#怎么提高首屏展示效率" class="sidebar-link">怎么提高首屏展示效率</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#打开页面白屏，怎么排查错误在哪里" class="sidebar-link">打开页面白屏，怎么排查错误在哪里</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#如果一个页面加载的过程特别慢，如何定位是哪一部分的原因" class="sidebar-link">如果一个页面加载的过程特别慢，如何定位是哪一部分的原因</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#开发者工具的使用" class="sidebar-link">开发者工具的使用</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#一个表单如何阻止用户重复提交" class="sidebar-link">一个表单如何阻止用户重复提交</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#长列表优化" class="sidebar-link">长列表优化</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#页面中的内容是统一发送给客户端的，还是分块发送的" class="sidebar-link">页面中的内容是统一发送给客户端的，还是分块发送的</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#监听页面滚动" class="sidebar-link">监听页面滚动</a></li><li class="sidebar-sub-header"><a href="/frontend/performance/performance.html#前端性能指标" class="sidebar-link">前端性能指标</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="待填坑"><a href="#待填坑" class="header-anchor">#</a> 待填坑</h1> <h2 id="性能优化措施"><a href="#性能优化措施" class="header-anchor">#</a> 性能优化措施</h2> <h3 id="content-方面"><a href="#content-方面" class="header-anchor">#</a> content 方面</h3> <ul><li>减少 HTTP 请求：合并文件，CSS精灵图，小图base64；</li> <li>减少 DNS 查询：DNS 查询完成之前浏览器不能从这个主机下载任何文件。方法：DNS缓存，将资源分布到恰当数量的主机名，平衡并行下载和 DNS 查询；</li> <li>避免重定向：多余的中间访问；</li> <li>非必须组件延迟加载；</li> <li>未来所需组件预加载；</li> <li>将资源放到不同的域下：浏览器同事从一个域下载资源的数目有限，增加域可以提高并行下载量；</li> <li>减少 iframe 数量；</li></ul> <h3 id="server-方面"><a href="#server-方面" class="header-anchor">#</a> Server 方面</h3> <ul><li>使用 CDN</li> <li>添加 Expires 或者 Cache-Control 响应头</li> <li>对组件使用 Gzip 压缩</li> <li>配置 ETag</li> <li>避免空 src 的 img 标签</li></ul> <h3 id="cookie-方面"><a href="#cookie-方面" class="header-anchor">#</a> Cookie 方面</h3> <ul><li>减小 cookie 大小</li> <li>引入资源的域名不要包含cookie</li></ul> <h3 id="css-方面"><a href="#css-方面" class="header-anchor">#</a> CSS 方面</h3> <ul><li>将样式表放到页面顶部</li> <li>不使用CSS 表达式</li> <li>可将元素设为display: none（需要1次重排和重绘），然后N次操作，最后恢复显示</li> <li>position属性为absolute或fixed的元素，重排的开销会比较小，因为不用考虑它对其他元素的影响。</li> <li>避免@imports和Base64</li></ul> <h3 id="javascript-方面"><a href="#javascript-方面" class="header-anchor">#</a> JavaScript 方面</h3> <ul><li>将脚本放到页面底部</li> <li>将 JavaScript(CSS) 从外部引入</li> <li>压缩 JavaScript(CSS)</li> <li>删除不需要的脚本</li> <li>减少 DOM 访问</li> <li>合理设计事件监听器，事件委托</li> <li>减少作用域链的查找，如果一个闭包函数使用到全局作用域的数据，那么每次局部作用域都会一层一层爬到最高作用域取得数据。</li> <li>将前端可能会使用的一些算法函数写的更优化，在时间和空间复杂度上寻找到一个最优方案。</li></ul> <h3 id="dom方面"><a href="#dom方面" class="header-anchor">#</a> DOM方面</h3> <ul><li>不要一项一项地改变样式，而是使用 CSS class 一次性改变样式。</li> <li>使用 documentFragment 操作 DOM</li> <li>动画使用absolute定位或fixed定位，这样可以减少对其他元素的影响。</li> <li>只在必要时才显示隐藏元素。</li> <li>使用window.requestAnimationFrame()，因为它可以把代码推迟到下一次重绘之前执行，而不是立即要求页面重绘。</li> <li>使用虚拟 DOM（virtual DOM）库。</li></ul> <h3 id="图片方面"><a href="#图片方面" class="header-anchor">#</a> 图片方面</h3> <ul><li>使用 webp 格式的图片</li> <li>图片尺寸的选择，在低分辨率等状况下考虑降级处理（考虑响应式图片）</li> <li>使用正确的工具进行优化（有损压缩、无损压缩）</li> <li>能用css处理和代理的，优先考虑css实现（阴影，滤镜等）</li> <li>考虑图片的懒加载和元素可见加载方案</li> <li>图片的预加载，在正确的合理的设计节点进行图片的预加载</li></ul> <h2 id="结合输入-url-到-渲染页面"><a href="#结合输入-url-到-渲染页面" class="header-anchor">#</a> 结合输入 URL 到 渲染页面</h2> <ol><li><p>输入网址 --- 告诉浏览器你要去哪里</p></li> <li><p>浏览器查找DNS --- 网络世界是IP地址的世界，DNS就是ip地址的别名。从本地DNS到最顶级DNS一步一步的网上爬，直到命中需要访问的IP地址</p> <p>DNS预解析 --- 使用CDN缓存，加快解析CDN寻找到目标地址（dns-prefetch）</p></li> <li><p>客户端和服务器建立连接 --- 建立TCP的安全通道，3次握手</p> <ul><li>CDN加速 --- 使用内容分发网络，让用户更快的获取到所要内容</li> <li>启用压缩 --- 在http协议中，使用类似Gzip压缩的方案（对服务器资源不足的时候进行权衡）</li> <li>使用HTTP/2协议 --- http2.0针对1.0优化了很多东西，包括异步连接复用，头压缩等等，使传输更快</li></ul></li> <li><p>浏览器发送http请求 --- 默认长连接（复用一个tcp通道，短连接：每次连接完就销毁）</p> <ul><li><p>减少http请求 --- 每个请求从创建到销毁都会消耗很多资源和时间，减少请求就可以相对来说更快展示内容</p> <ul><li>压缩合并js文件以及css文件</li> <li>针对图片，可将图片进行合并然后下载，通过css Sprites切割展示（控制大小，太大的话反而适得其反）</li></ul></li> <li><p>使用http缓存 --- 让客户端发送更少请求，直接从本地获取，加快性能。</p></li> <li><p>减少cookie请求 --- 针对非必要数据（静态资源）请求，进行跨域隔离，减少传输内容大小。</p></li> <li><p>预加载请求 --- 针对一些业务中场景可预加载的内容，提前加载，在之后的用户操作中更少的请求，更快的响应</p></li> <li><p>选择get和post --- <strong>在http定义的时候，get本质上就是获取数据，post是发送数据的。get可以在一个TCP报文完成请求，但是post先发header，再发送数据。</strong></p></li> <li><p>缓存方案选型 --- 递进式缓存更新（防止一次性丢失大量缓存，导致负载骤多）</p></li></ul></li> <li><p>服务器响应请求 --- tomcat、IIS等服务器通过本地映射文件关系找到地址或者通过数据库查找到数据，处理完成返回给浏览器</p></li> <li><p>浏览器接受响应 --- 浏览器根据报文头里面的数据进行不同的响应处理</p> <ul><li>解耦第三方依赖 --- 越多的第三方的不确定因素，会导致web的不稳定性和不确定性</li> <li>避免404资源 --- 请求资源不到浪费了从请求到接受的所有资源</li></ul></li> <li><p>浏览器渲染</p> <ul><li><p>HTML解析开始构建dom树</p></li> <li><p>外部脚本和样式表加载完毕</p> <ul><li>尽快加载css，首先将CSSOM对象渲染出来，然后进行页面渲染，否则导致页面闪屏，用户体验差</li> <li>css选择器是从右往左解析的，类似<code>#test a {color: #444}</code>,css解析器会查找所有a标签的祖先节点，所以效率不是那么高</li> <li>在css的媒介查询中，最好不要直接和任何css规则直接相关。最好写到link标签中，告诉浏览器，只有在这个媒介下，加载指定这个css</li></ul></li> <li><p>脚本在文档内解析并执行</p> <ul><li>按需加载脚本，例如现在的webpack就可以打包和按需加载js脚本</li> <li>将脚本标记为异步，不阻塞页面渲染，获得最佳启动，保证无关主要的脚本不会阻塞页</li> <li>慎重选型框架和类库，避免只是用类库和框架的一个功能或者函数，而引用整个文件。</li></ul></li> <li><p>HTML DOM完全构造起来</p> <p>DOM 的多个读操作（或多个写操作），应该放在一起。原则：统一读、统一写。</p></li> <li><p>图片和外部内容加载</p> <ul><li>对多媒体内容进行适当优化，包括恰当使用文件格式，文件处理、渐进式渲染等</li> <li>避免空的src，空的src仍然会发送请求到服务器</li> <li>避免在html内容中缩放图片，如果你需要使用小图，则直接使用小图</li></ul></li> <li><p>网页完成加载</p> <p>服务端渲染，特别针对首屏加载很重要的网站，可以考虑这个方案。后端渲染结束，前端接管展示。</p></li></ul></li></ol> <h2 id="避免css-import"><a href="#避免css-import" class="header-anchor">#</a> 避免css @import</h2> <p>CSS @import允许把样式表导入到其他样式表里，当CSS @import 在外部样式表中使用，浏览器是不能并行下载这些样式表的，这将增加网络请求的来回时间</p> <p>例如，如果first.css包含如下内容：<code>@import url(&quot;second.css&quot;)</code>, 浏览器必须先下载、解析和执行first.css，再去下载second.css。</p> <p>对每个样式表使用 <code>&lt;link&gt;</code> 标记代替 CSS @import，以便浏览器能并行下载样式表，这将加速网页的加载时间</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>first.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>second.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="图片懒加载"><a href="#图片懒加载" class="header-anchor">#</a> 图片懒加载⭐️</h2> <p>图片懒加载在一些图片密集型的网站中运用比较多，通过图片懒加载可以让一些不可视的图片不去加载，避免一次性加载过多的图片导致请求阻塞（浏览器一般对同一域名下的并发请求的连接数有限制），这样就可以提高网站的加载速度，提高用户体验。</p> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>将页面中的img标签src指向一张小图片或者src为空，然后定义data-src 属性指向真实的图片。src指向一张默认的图片，否则当src为空时也会向服务器发送一次请求。可以指向loading的地址。</p> <p>注意，图片要指定宽高。</p> <p><img src="/img/16acb6b3d9cd7944.webp.jpg" alt="offset"> <img src="/img/16acb6bb44b12f65.webp.jpg" alt="client"> <img src="/img/16acb6c07882036c.webp.jpg" alt="scroll"></p> <p>理论上没有滚动条时scrollHeight和clientHeight相同，事实上各种浏览器有不同的处理，所以最保险的方法是取这俩中最大者。</p> <h3 id="原生方法"><a href="#原生方法" class="header-anchor">#</a> 原生方法</h3> <ul><li><p>Element.clientHeight:</p> <p>内联元素以及没有 CSS 样式的元素的 clientWidth 属性值为 0。</p> <p>Element.clientHeight 属性表示元素的内部高度，以像素计。该属性包括内边距 padding，但不包括边框 border、外边距 margin 和水平滚动条（如果有的话）。</p></li> <li><p>element.offsetTop</p> <p>它返回当前元素相对于其 offsetParent 元素的顶部内边距的距离。</p></li> <li><p>Element.scrollTop</p> <p>获取或设置一个元素的内容垂直滚动的像素数。</p> <p>一个元素的 scrollTop 值是这个元素的内容顶部（卷起来的）到它的视口可见内容（的顶部）的距离的度量。当一个元素的内容没有产生垂直方向的滚动条，那么它的 scrollTop 值为0</p></li></ul> <p>如果：offsetTop &lt; clientHeight - scroolTop，则图片进入了可视区内，则被请求。</p> <p><img src="/img/v2-af1ab0c5f34e468e8647135c1f9f51e4_720w.jpg" alt="距离关系"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//简单实现</span>
<span class="token keyword">var</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//offsetTop是元素与offsetParent的距离，循环获取直到页面顶部</span>
<span class="token keyword">function</span> <span class="token function">getTop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>offsetParent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">T</span> <span class="token operator">+=</span> e<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token parameter">imgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">H</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span><span class="token comment">//获取可视区域高度</span>
    <span class="token keyword">var</span> <span class="token constant">S</span> <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">H</span> <span class="token operator">+</span> <span class="token constant">S</span> <span class="token operator">&gt;</span> <span class="token function">getTop</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span>onload <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//onscroll()在滚动条滚动的时候触发</span>
    <span class="token function">lazyLoad</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="intersectionobserver"><a href="#intersectionobserver" class="header-anchor">#</a> intersectionObserver()</h3> <p>IntersectionObserver API，可以自动&quot;观察&quot;元素是否可见</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> option<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，IntersectionObserver是浏览器原生提供的构造函数，接受两个参数：callback是可见性变化时的回调函数，option是配置对象（该参数可选）。</p> <p>构造函数的返回值是一个观察器实例。实例的observe方法可以指定观察哪个 DOM 节点。</p> <p>其他方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 开始观察</span>
io<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 停止观察</span>
io<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭观察器</span>
io<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>IntersectionObserver API 是异步的，不随着目标元素的滚动同步触发。</p> <p>规格写明，IntersectionObserver的实现，应该采用requestIdleCallback()，即只有线程空闲下来，才会执行观察器。这意味着，这个观察器的优先级非常低，只在其他任务执行完，浏览器有了空闲才会执行。</p> <h4 id="callback参数"><a href="#callback参数" class="header-anchor">#</a> callback参数</h4> <p>目标元素的可见性变化时，就会调用观察器的回调函数callback。</p> <p>callback一般会触发两次。一次是目标元素刚刚进入视口（开始可见），另一次是完全离开视口（开始不可见）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>
  <span class="token parameter">entries</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>callback函数的参数（entries）是一个数组，每个成员都是一个IntersectionObserverEntry对象。</p> <p>举例来说，如果同时有两个被观察的对象的可见性发生变化，entries数组就会有两个成员。</p> <h4 id="intersectionobserverentry-对象"><a href="#intersectionobserverentry-对象" class="header-anchor">#</a> IntersectionObserverEntry 对象</h4> <p>IntersectionObserverEntry对象提供目标元素的信息，一共有六个属性。</p> <ul><li>time：可见性发生变化的时间，是一个高精度时间戳，单位为毫秒</li> <li>target：被观察的目标元素，是一个 DOM 节点对象</li> <li>rootBounds：根元素的矩形区域的信息，getBoundingClientRect()方法的返回值，如果没有根元素（即直接相对于视口滚动），则返回null</li> <li>boundingClientRect：目标元素的矩形区域的信息</li> <li>intersectionRect：目标元素与视口（或根元素）的交叉区域的信息</li> <li>intersectionRatio：目标元素的可见比例，即intersectionRect占boundingClientRect的比例，完全可见时为1，完全不可见时小于等于0</li></ul> <h4 id="option-对象"><a href="#option-对象" class="header-anchor">#</a> Option 对象</h4> <p>IntersectionObserver构造函数的第二个参数是一个配置对象。它可以设置以下属性。</p> <ul><li><p>threshold 属性</p> <p>threshold属性决定了什么时候触发回调函数。它是一个数组，每个成员都是一个门槛值，默认为[0]，即交叉比例（intersectionRatio）达到0时触发回调函数。</p></li> <li><p>root 属性，rootMargin 属性</p> <p>很多时候，目标元素不仅会随着窗口滚动，还会在容器里面滚动（比如在iframe窗口里滚动）。容器内滚动也会影响目标元素的可见性，参见本文开始时的那张示意图。</p> <p>IntersectionObserver API 支持容器内滚动。root属性指定目标元素所在的容器节点（即根元素）。注意，容器元素必须是目标元素的祖先节点。</p> <p>后者定义根元素的margin，用来扩展或缩小rootBounds这个矩形的大小，从而影响intersectionRect交叉区域的大小。它使用CSS的定义方法，比如10px 20px 30px 40px，表示 top、right、bottom 和 left 四个方向的值。</p></li></ul> <h3 id="实现懒加载"><a href="#实现懒加载" class="header-anchor">#</a> 实现懒加载</h3> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> eles <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.img-list li img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取所有列表元素</span>
			
	<span class="token comment">// 监听回调</span>
	<span class="token keyword">var</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token comment">// 出现到可视区</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>intersectionRatio <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> ele <span class="token operator">=</span> item<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
				<span class="token keyword">var</span> imgSrc <span class="token operator">=</span> ele<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>imgSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// 预加载</span>
					<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						ele<span class="token punctuation">.</span>src <span class="token operator">=</span> imgSrc<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					ele<span class="token punctuation">.</span>src <span class="token operator">=</span> imgSrc<span class="token punctuation">;</span>
					<span class="token comment">// 加载过清空路径，避免重复加载</span>
					ele<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 列表元素加入监听</span>
	eles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getboundingclientrect"><a href="#getboundingclientrect" class="header-anchor">#</a> getBoundingClientRect()</h3> <p>Element.getBoundingClientRect方法返回一个对象，提供当前元素节点的大小、位置等信息</p> <p>getBoundingClientRect方法返回的rect对象，具有以下属性（全部为只读）。</p> <ul><li>x：元素左上角相对于视口的横坐标</li> <li>y：元素左上角相对于视口的纵坐标</li> <li>height：元素高度</li> <li>width：元素宽度</li> <li>left：元素左上角相对于视口的横坐标，与x属性相等</li> <li>right：元素右边界相对于视口的横坐标（等于x + width）</li> <li>top：元素顶部相对于视口的纵坐标，与y属性相等</li> <li>bottom：元素底部相对于视口的纵坐标（等于y + height）</li></ul> <p>由于元素相对于视口（viewport）的位置，会随着页面滚动变化，因此表示位置的四个属性值，都不是固定不变的。</p> <p>如果想得到绝对位置，可以将left属性加上window.scrollX，top属性加上window.scrollY。</p> <p>getBoundingClientRect方法的所有属性，都把边框（border属性）算作元素的一部分。都是从边框外缘的各个点来计算。</p> <p>因此，width和height包括了元素本身 + padding + border。</p> <p><strong>上面的这些属性，都是继承自原型的属性，Object.keys会返回一个空数组</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//简单实现</span>
<span class="token keyword">var</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//用来判断bound.top&lt;=clientHeight的函数，返回一个bool值</span>
<span class="token keyword">function</span> <span class="token function">isIn</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> bound <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> clientHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
	
    <span class="token keyword">return</span> bound<span class="token punctuation">.</span>top <span class="token operator">&lt;=</span> clientHeight<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">//检查图片是否在可视区内，如果不在，则加载</span>
<span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isIn</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">loadImg</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">loadImg</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> source <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
        el<span class="token punctuation">.</span>src <span class="token operator">=</span> source<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onload <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//onscroll()在滚动条滚动的时候触发</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="js-懒加载"><a href="#js-懒加载" class="header-anchor">#</a> JS 懒加载</h3> <h3 id="怎么判断需要懒加载"><a href="#怎么判断需要懒加载" class="header-anchor">#</a> 怎么判断需要懒加载</h3> <h3 id="vue中懒加载"><a href="#vue中懒加载" class="header-anchor">#</a> vue中懒加载</h3> <h3 id="图片资源压缩显示"><a href="#图片资源压缩显示" class="header-anchor">#</a> 图片资源压缩显示</h3> <h3 id="图片压缩算法"><a href="#图片压缩算法" class="header-anchor">#</a> 图片压缩算法</h3> <h3 id="图片格式"><a href="#图片格式" class="header-anchor">#</a> 图片格式</h3> <table><thead><tr><th>图片格式</th> <th>压缩方式</th> <th>透明度</th> <th>动画</th> <th>浏览器兼容</th> <th>适应场景</th></tr></thead> <tbody><tr><td>JPEG</td> <td>有损压缩</td> <td>不支持</td> <td>不支持</td> <td>所有</td> <td>复杂颜色及形状、尤其是照片</td></tr> <tr><td>GIF</td> <td>无损压缩</td> <td>支持</td> <td>支持</td> <td>所有</td> <td>简单颜色，动画</td></tr> <tr><td>PNG</td> <td>无损压缩</td> <td>支持</td> <td>不支持</td> <td>所有</td> <td>需要透明时</td></tr> <tr><td>APNG</td> <td>无损压缩</td> <td>支持</td> <td>支持</td> <td>FirefoxSafariiOS Safari</td> <td>需要半透明效果的动画</td></tr> <tr><td>WebP</td> <td>有损压缩</td> <td>支持</td> <td>支持</td> <td>ChromeOperaAndroid ChromeAndroid Browser</td> <td>复杂颜色及形状浏览器平台可预知</td></tr> <tr><td>SVG</td> <td>无损压缩</td> <td>支持</td> <td>支持</td> <td>所有（IE8以上）</td> <td>简单图形，需要良好的放缩体验需要动态控制图片特效</td></tr></tbody></table> <h3 id="base64弊端"><a href="#base64弊端" class="header-anchor">#</a> base64弊端</h3> <ul><li>base64 编码后比原图要大30%（使用 8bit 表示 6bit 的内容），但是经过gzip压缩后和直接原图经过压缩差不多</li> <li>如果把大图片编码到 html / css 中，会造成后者体积明显增加，明显影响网页的打开速度。如果用外链图片的话，图片可以在页面渲染完成后继续加载，不会造成阻塞。</li> <li>base64 无法缓存，要缓存只能缓存包含 base64 的文件，比如 HTML 或者 CSS，这相比直接缓存图片要弱很多，一般 HTM 会改动频繁，所以等同于得不到缓存效益。</li> <li>如果构建工具比较落后（或者没有构建工具），手动插入 base64 比较麻烦，webpack 的url-loader 可以自动根据文件大小决定要不要做成内联 base64</li></ul> <blockquote><p>听说还有兼容性的问题。使用 base64 的另外一个弊端是 IE 的兼容性问题。IE 8 以下不支持 data url，IE 8 开始支持 data url，却有大小限制，32k（未测试）。</p></blockquote> <h3 id="如果实现上传图片的功能，前端后端分别怎么做"><a href="#如果实现上传图片的功能，前端后端分别怎么做" class="header-anchor">#</a> 如果实现上传图片的功能，前端后端分别怎么做</h3> <h3 id="如果想实现前端预览图片，怎么做"><a href="#如果想实现前端预览图片，怎么做" class="header-anchor">#</a> 如果想实现前端预览图片，怎么做</h3> <h3 id="加载图片失败时替换默认图片怎么处理"><a href="#加载图片失败时替换默认图片怎么处理" class="header-anchor">#</a> 加载图片失败时替换默认图片怎么处理</h3> <h3 id="图片模糊了怎么处理？"><a href="#图片模糊了怎么处理？" class="header-anchor">#</a> 图片模糊了怎么处理？</h3> <h3 id="data-src"><a href="#data-src" class="header-anchor">#</a> data-src⭐️</h3> <h3 id="响应式图片"><a href="#响应式图片" class="header-anchor">#</a> 响应式图片</h3> <h3 id="图片、音视频预加载有哪些思路"><a href="#图片、音视频预加载有哪些思路" class="header-anchor">#</a> 图片、音视频预加载有哪些思路</h3> <h2 id="虚拟列表"><a href="#虚拟列表" class="header-anchor">#</a> 虚拟列表⭐️</h2> <p>如果列表项的数量比较多，很多情况下我们会采用分页加载的方式，来避免一次性加载大量的数据，造成页面的性能问题。</p> <p>但是用户在分页加载浏览了大量数据之后，列表项也会逐渐增多，此时页面可能会存在卡顿的情况。亦或者是我们需要一次性加载大量的数据，将所有的数据一次性呈现到用户面前，而不是采用分页加载的方式，此时列表项的数量可能会非常庞大，造成页面的卡顿。
  
通过一种虚拟列表的优化方法可以解决数据量大的时候列表的性能问题</p> <p>虚拟列表是按需显示的一种技术，可以根据用户的滚动，不必渲染所有列表项，而只是渲染可视区域内的一部分列表元素的技术。</p> <h2 id="无限列表"><a href="#无限列表" class="header-anchor">#</a> 无限列表</h2> <h2 id="渲染优化。。。"><a href="#渲染优化。。。" class="header-anchor">#</a> 渲染优化。。。</h2> <ul><li>使用CSS3代码代替JS动画（尽可能避免重绘重排以及回流）</li> <li>用innerHTML代替DOM操作，减少DOM操作次数，优化javascript性能</li> <li>当需要设置的样式很多时设置className而不是直接操作style</li> <li>少用全局变量、缓存DOM节点查找的结果。减少IO读取操作</li> <li>图片预加载，将样式表放在顶部，将脚本放在底部</li></ul> <h2 id="为什么执行js会暂停ui渲染？"><a href="#为什么执行js会暂停ui渲染？" class="header-anchor">#</a> 为什么执行JS会暂停UI渲染？</h2> <h2 id="什么情况下引起重排和重绘，color会不会，margin会不会，font-size会不会"><a href="#什么情况下引起重排和重绘，color会不会，margin会不会，font-size会不会" class="header-anchor">#</a> 什么情况下引起重排和重绘，color会不会，margin会不会，font-size会不会</h2> <p>引起回流的操作有如下：</p> <ul><li>页面首次渲染</li> <li>浏览器窗口大小发生改变</li> <li>元素尺寸或位置发生改变元素内容变化（文字数量或图片大小等等）</li> <li>元素字体大小变化</li> <li>添加或者删除可见的 DOM 元素</li> <li>激活 CSS 伪类（例如:hover）</li> <li>查询某些属性或调用某些方法</li> <li>一些常用且会导致回流的属性和方法</li></ul> <h3 id="opacity改变会导致重排和重绘吗"><a href="#opacity改变会导致重排和重绘吗" class="header-anchor">#</a> opacity改变会导致重排和重绘吗</h3> <h3 id="设置以下属性的-img-元素是否会被加载？"><a href="#设置以下属性的-img-元素是否会被加载？" class="header-anchor">#</a> 设置以下属性的 img 元素是否会被加载？</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>IE浏览器会发送图片请求；</p> <p>Firefox浏览器不会发送请求；</p> <p>chrome和safari浏览器更特殊一些，如果display:none设置在了父级元素上，则子元素背景图不会发送请求，如果display:none和background-image都设置在同一元素上，则会发送图片请求。</p> <h2 id="scroll应该用防抖还是节流"><a href="#scroll应该用防抖还是节流" class="header-anchor">#</a> scroll应该用防抖还是节流</h2> <p>节流</p> <h2 id="dns预处理，为什么要做dns预处理，如何实现"><a href="#dns预处理，为什么要做dns预处理，如何实现" class="header-anchor">#</a> DNS预处理，为什么要做DNS预处理，如何实现</h2> <h2 id="cdn"><a href="#cdn" class="header-anchor">#</a> CDN</h2> <p>CDN的基本原理是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求。</p> <p>最简单的CDN网络由一个 DNS 服务器和几台缓存服务器就可以组成，当用户输入URL按下回车，经过本地DNS系统解析，DNS系统会最终将域名的解析权交给CNAME指向的CDN专用DNS服务器，然后将得到全局负载均衡设备的IP地址，用户向全局负载均衡设备发送内容访问请求，全局负载均衡设备将实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上，使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。</p> <h3 id="过程"><a href="#过程" class="header-anchor">#</a> 过程</h3> <p>使用CDN的方法很简单，只需要修改自己的DNS解析，设置一个CNAME指向CDN服务商即可。</p> <ul><li><p>用户访问未使用CDN缓存资源的过程为:</p> <ol><li>浏览器通过前面提到的过程对域名进行解析，以得到此域名对应的IP地址；</li> <li>浏览器使用所得到的IP地址，向域名的服务主机发出数据访问请求；</li> <li>服务器向浏览器返回响应数据</li></ol></li> <li><p>使用CDN后</p> <ol><li>当用户点击网站页面上的内容URL，经过本地DNS系统解析，DNS系统会最终将域名的解析权交给CNAME指向的CDN专用DNS服务器。</li> <li>CDN的DNS服务器将CDN的全局负载均衡设备IP地址返回用户。</li> <li>用户向CDN的全局负载均衡设备发起内容URL访问请求。</li> <li>CDN全局负载均衡设备根据用户IP地址，以及用户请求的内容URL，选择一台用户所属区域的区域负载均衡设备，告诉用户向这台设备发起请求。</li> <li>区域负载均衡设备会为用户选择一台合适的缓存服务器提供服务，选择的依据包括：根据用户IP地址，判断哪一台服务器距用户最近；根据用户所请求的URL中携带的内容名称，判断哪一台服务器上有用户所需内容；查询各个服务器当前的负载情况，判断哪一台服务器尚有服务能力。基于以上这些条件的综合分析之后，区域负载均衡设备会向全局负载均衡设备返回一台缓存服务器的IP地址。</li> <li>全局负载均衡设备把服务器的IP地址返回给用户</li> <li>用户向缓存服务器发起请求，缓存服务器响应用户请求，将用户所需内容传送到用户终端。如果这台缓存服务器上并没有用户想要的内容，而区域均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉到本地。</li></ol></li></ul> <p><img src="/img/v2-5ba76e77f05b030b5879177bd336928f_720w.jpg" alt="CDN 过程"></p> <h3 id="原则"><a href="#原则" class="header-anchor">#</a> 原则</h3> <ul><li>针对 HTML 文件：不开启缓存，把 HTML 放到自己的服务器上，而不是 CDN 服务上，同时关闭自己服务器上的缓存。自己的服务器只提供 HTML 文件和数据接口。</li> <li>针对静态的 JavaScript、CSS、图片等文件：开启 CDN 和缓存，上传到 CDN 服务上去，同时给每个文件名带上由文件内容算出的 Hash 值， 例如app_a6976b6d.css 文件。 带上 Hash 值的原因是文件名会随着文件内容而变化，只要文件发生变化其对应的 URL 就会变化，它就会被重新下载，无论缓存时间有多长。</li></ul> <h3 id="限制"><a href="#限制" class="header-anchor">#</a> 限制</h3> <p>由于所有静态资源都放到了同一个 CDN 服务的域名下， 如果网页的资源很多，例如有很多图片，就会导致资源的加载被阻塞，因为同时只能加载几个，必须等其它资源加载完才能继续加载。 要解决这个问题，可以把这些静态资源分散到不同的 CDN 服务上去， 例如把 JavaScript 文件放到 js.cdn.com 域名下、把 CSS 文件放到 css.cdn.com 域名下、图片文件放到 img.cdn.com 域名下</p> <p>使用了多个域名后又会带来一个新问题：增加域名解析时间。是否采用多域名分散资源需要根据需求去衡量得失。</p> <p>当然也可以通过在 HTML HEAD 标签中 加入 <code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//js.cdn.com&quot;&gt;</code>去预解析域名，以降低域名解析带来的延迟。</p> <h3 id="图片存储在cdn如何获取宽高、像素"><a href="#图片存储在cdn如何获取宽高、像素" class="header-anchor">#</a> 图片存储在CDN如何获取宽高、像素</h3> <h3 id="什么资源放在cdn中"><a href="#什么资源放在cdn中" class="header-anchor">#</a> 什么资源放在CDN中</h3> <p>img、css</p> <h2 id="如何减少传输体积"><a href="#如何减少传输体积" class="header-anchor">#</a> 如何减少传输体积</h2> <p>gzip</p> <h3 id="zip压缩的基本原理"><a href="#zip压缩的基本原理" class="header-anchor">#</a> ZIP压缩的基本原理</h3> <h3 id="压缩后数据为什么都是二进制的"><a href="#压缩后数据为什么都是二进制的" class="header-anchor">#</a> 压缩后数据为什么都是二进制的</h3> <h3 id="怎么对请求的内容进行压缩"><a href="#怎么对请求的内容进行压缩" class="header-anchor">#</a> 怎么对请求的内容进行压缩</h3> <h2 id="怎么判断资源是否加载完毕，包括图片、视频、音频"><a href="#怎么判断资源是否加载完毕，包括图片、视频、音频" class="header-anchor">#</a> 怎么判断资源是否加载完毕，包括图片、视频、音频</h2> <h2 id="在页面上向列表中插入100000个dom元素，for循环100000次，每次插入一个，发现性能方面的问题，怎么优化"><a href="#在页面上向列表中插入100000个dom元素，for循环100000次，每次插入一个，发现性能方面的问题，怎么优化" class="header-anchor">#</a> 在页面上向列表中插入100000个Dom元素，for循环100000次，每次插入一个，发现性能方面的问题，怎么优化</h2> <p>documentFragment + requestAnimationFrame</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      控件
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 插入十万条数据</span>
        <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token number">100000</span>
        <span class="token comment">// 一次插入 20 条，如果觉得性能不好就减少</span>
        <span class="token keyword">const</span> once <span class="token operator">=</span> <span class="token number">20</span>
        <span class="token comment">// 渲染数据总共需要几次</span>
        <span class="token keyword">const</span> loopCount <span class="token operator">=</span> total <span class="token operator">/</span> once
        <span class="token keyword">let</span> countOfRender <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">let</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
        <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 优化性能，插入不会造成回流</span>
          <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> once<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
            li<span class="token punctuation">.</span>innerText <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> total<span class="token punctuation">)</span>
            fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>
          countOfRender <span class="token operator">+=</span> <span class="token number">1</span>
          <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>countOfRender <span class="token operator">&lt;</span> loopCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="如果一个十万级的大数据要如何进行加载？"><a href="#如果一个十万级的大数据要如何进行加载？" class="header-anchor">#</a> 如果一个十万级的大数据要如何进行加载？</h2> <h2 id="怎么提高首屏展示效率"><a href="#怎么提高首屏展示效率" class="header-anchor">#</a> 怎么提高首屏展示效率</h2> <h2 id="打开页面白屏，怎么排查错误在哪里"><a href="#打开页面白屏，怎么排查错误在哪里" class="header-anchor">#</a> 打开页面白屏，怎么排查错误在哪里</h2> <h3 id="ssr"><a href="#ssr" class="header-anchor">#</a> SSR</h3> <h2 id="如果一个页面加载的过程特别慢，如何定位是哪一部分的原因"><a href="#如果一个页面加载的过程特别慢，如何定位是哪一部分的原因" class="header-anchor">#</a> 如果一个页面加载的过程特别慢，如何定位是哪一部分的原因</h2> <h2 id="开发者工具的使用"><a href="#开发者工具的使用" class="header-anchor">#</a> 开发者工具的使用</h2> <h2 id="一个表单如何阻止用户重复提交"><a href="#一个表单如何阻止用户重复提交" class="header-anchor">#</a> 一个表单如何阻止用户重复提交</h2> <h2 id="长列表优化"><a href="#长列表优化" class="header-anchor">#</a> 长列表优化</h2> <h2 id="页面中的内容是统一发送给客户端的，还是分块发送的"><a href="#页面中的内容是统一发送给客户端的，还是分块发送的" class="header-anchor">#</a> 页面中的内容是统一发送给客户端的，还是分块发送的</h2> <h3 id="如何实现资源的分批次加载"><a href="#如何实现资源的分批次加载" class="header-anchor">#</a> 如何实现资源的分批次加载</h3> <h2 id="监听页面滚动"><a href="#监听页面滚动" class="header-anchor">#</a> 监听页面滚动</h2> <h2 id="前端性能指标"><a href="#前端性能指标" class="header-anchor">#</a> 前端性能指标</h2> <p>LCP FCP FMP SI</p> <h3 id="怎么评估优化"><a href="#怎么评估优化" class="header-anchor">#</a> 怎么评估优化</h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/performance/" class="prev router-link-active">
        首页
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.484f4375.js" defer></script><script src="/assets/js/2.ebbe98b4.js" defer></script><script src="/assets/js/99.d91a7a9f.js" defer></script>
  </body>
</html>
