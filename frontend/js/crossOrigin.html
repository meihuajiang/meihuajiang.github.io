<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域 | ゼロツー</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.jpg">
    <meta name="description" content="zerotwo">
    <link rel="preload" href="/assets/css/0.styles.f0b7ee7d.css" as="style"><link rel="preload" href="/assets/js/app.484f4375.js" as="script"><link rel="preload" href="/assets/js/2.ebbe98b4.js" as="script"><link rel="preload" href="/assets/js/54.e2bff3b5.js" as="script"><link rel="prefetch" href="/assets/js/10.91de1805.js"><link rel="prefetch" href="/assets/js/100.1772503e.js"><link rel="prefetch" href="/assets/js/101.b569a1af.js"><link rel="prefetch" href="/assets/js/102.65dffa11.js"><link rel="prefetch" href="/assets/js/103.d7a8cd9e.js"><link rel="prefetch" href="/assets/js/104.0a0e3708.js"><link rel="prefetch" href="/assets/js/105.15bc167a.js"><link rel="prefetch" href="/assets/js/106.8487cf9a.js"><link rel="prefetch" href="/assets/js/107.2310b94b.js"><link rel="prefetch" href="/assets/js/108.781b7ebe.js"><link rel="prefetch" href="/assets/js/109.6225704a.js"><link rel="prefetch" href="/assets/js/11.9c44c6b2.js"><link rel="prefetch" href="/assets/js/110.3c39cb3c.js"><link rel="prefetch" href="/assets/js/111.22bede53.js"><link rel="prefetch" href="/assets/js/112.acb6b722.js"><link rel="prefetch" href="/assets/js/113.c2b6115e.js"><link rel="prefetch" href="/assets/js/114.cbeddf77.js"><link rel="prefetch" href="/assets/js/115.adf2d1b9.js"><link rel="prefetch" href="/assets/js/116.3f23eb5b.js"><link rel="prefetch" href="/assets/js/117.00cb8ac3.js"><link rel="prefetch" href="/assets/js/118.e88e1cfb.js"><link rel="prefetch" href="/assets/js/119.213aaa9b.js"><link rel="prefetch" href="/assets/js/12.878aa51b.js"><link rel="prefetch" href="/assets/js/120.fc12eb0e.js"><link rel="prefetch" href="/assets/js/121.67bafb52.js"><link rel="prefetch" href="/assets/js/122.cca49856.js"><link rel="prefetch" href="/assets/js/123.0e27eb9e.js"><link rel="prefetch" href="/assets/js/124.53383547.js"><link rel="prefetch" href="/assets/js/125.e103d7f1.js"><link rel="prefetch" href="/assets/js/126.adb34a41.js"><link rel="prefetch" href="/assets/js/127.f352dcec.js"><link rel="prefetch" href="/assets/js/128.9aa22460.js"><link rel="prefetch" href="/assets/js/129.02dabe8a.js"><link rel="prefetch" href="/assets/js/13.b4c5b1dd.js"><link rel="prefetch" href="/assets/js/130.7d88cb43.js"><link rel="prefetch" href="/assets/js/14.dce5d003.js"><link rel="prefetch" href="/assets/js/15.ec0f3b1f.js"><link rel="prefetch" href="/assets/js/16.a9597b38.js"><link rel="prefetch" href="/assets/js/17.c8f44f51.js"><link rel="prefetch" href="/assets/js/18.67e67934.js"><link rel="prefetch" href="/assets/js/19.2b8ea36f.js"><link rel="prefetch" href="/assets/js/20.ee5ab76e.js"><link rel="prefetch" href="/assets/js/21.1582f8ed.js"><link rel="prefetch" href="/assets/js/22.130fb5fa.js"><link rel="prefetch" href="/assets/js/23.ecbb4b5d.js"><link rel="prefetch" href="/assets/js/24.0c8b3ecd.js"><link rel="prefetch" href="/assets/js/25.4aae22ea.js"><link rel="prefetch" href="/assets/js/26.4816aa3d.js"><link rel="prefetch" href="/assets/js/27.2e6f0659.js"><link rel="prefetch" href="/assets/js/28.7e0fef24.js"><link rel="prefetch" href="/assets/js/29.dad88d85.js"><link rel="prefetch" href="/assets/js/3.5e8d6a69.js"><link rel="prefetch" href="/assets/js/30.1ecf79ca.js"><link rel="prefetch" href="/assets/js/31.0a97fafc.js"><link rel="prefetch" href="/assets/js/32.8e6151d1.js"><link rel="prefetch" href="/assets/js/33.b5ff95d1.js"><link rel="prefetch" href="/assets/js/34.0d03faf5.js"><link rel="prefetch" href="/assets/js/35.6d4b4665.js"><link rel="prefetch" href="/assets/js/36.b42cbedf.js"><link rel="prefetch" href="/assets/js/37.4de10dce.js"><link rel="prefetch" href="/assets/js/38.9031eb30.js"><link rel="prefetch" href="/assets/js/39.daee868f.js"><link rel="prefetch" href="/assets/js/4.ceb8a314.js"><link rel="prefetch" href="/assets/js/40.df374a26.js"><link rel="prefetch" href="/assets/js/41.563436c6.js"><link rel="prefetch" href="/assets/js/42.b9200ca4.js"><link rel="prefetch" href="/assets/js/43.40ae12a3.js"><link rel="prefetch" href="/assets/js/44.4a0dd48e.js"><link rel="prefetch" href="/assets/js/45.20d657cc.js"><link rel="prefetch" href="/assets/js/46.2d34fe10.js"><link rel="prefetch" href="/assets/js/47.3dcb2d38.js"><link rel="prefetch" href="/assets/js/48.1b0959df.js"><link rel="prefetch" href="/assets/js/49.6652f2b2.js"><link rel="prefetch" href="/assets/js/5.b28c76e0.js"><link rel="prefetch" href="/assets/js/50.30bdc802.js"><link rel="prefetch" href="/assets/js/51.ebe5930a.js"><link rel="prefetch" href="/assets/js/52.02f2caf4.js"><link rel="prefetch" href="/assets/js/53.55df3fc5.js"><link rel="prefetch" href="/assets/js/55.c859c458.js"><link rel="prefetch" href="/assets/js/56.d493a61b.js"><link rel="prefetch" href="/assets/js/57.9af46dbf.js"><link rel="prefetch" href="/assets/js/58.46d4e8aa.js"><link rel="prefetch" href="/assets/js/59.82e453fe.js"><link rel="prefetch" href="/assets/js/6.b43fc5c2.js"><link rel="prefetch" href="/assets/js/60.d9652552.js"><link rel="prefetch" href="/assets/js/61.bad1d82a.js"><link rel="prefetch" href="/assets/js/62.8c307334.js"><link rel="prefetch" href="/assets/js/63.7ebafb7e.js"><link rel="prefetch" href="/assets/js/64.bc588101.js"><link rel="prefetch" href="/assets/js/65.6f66d6a2.js"><link rel="prefetch" href="/assets/js/66.ee6f0d41.js"><link rel="prefetch" href="/assets/js/67.0002a9a5.js"><link rel="prefetch" href="/assets/js/68.4a86ea26.js"><link rel="prefetch" href="/assets/js/69.c9e36070.js"><link rel="prefetch" href="/assets/js/7.87b3f924.js"><link rel="prefetch" href="/assets/js/70.40af8c94.js"><link rel="prefetch" href="/assets/js/71.ee207bd6.js"><link rel="prefetch" href="/assets/js/72.c389068e.js"><link rel="prefetch" href="/assets/js/73.c1526d9c.js"><link rel="prefetch" href="/assets/js/74.cd1c9d32.js"><link rel="prefetch" href="/assets/js/75.144c1f5b.js"><link rel="prefetch" href="/assets/js/76.4c36bfbf.js"><link rel="prefetch" href="/assets/js/77.7db5b3f1.js"><link rel="prefetch" href="/assets/js/78.de99e748.js"><link rel="prefetch" href="/assets/js/79.1febcdca.js"><link rel="prefetch" href="/assets/js/8.ab13bda4.js"><link rel="prefetch" href="/assets/js/80.e802c8bb.js"><link rel="prefetch" href="/assets/js/81.960e4a52.js"><link rel="prefetch" href="/assets/js/82.9a35963d.js"><link rel="prefetch" href="/assets/js/83.005e1aad.js"><link rel="prefetch" href="/assets/js/84.d61f7f01.js"><link rel="prefetch" href="/assets/js/85.0906b75c.js"><link rel="prefetch" href="/assets/js/86.dff86ecd.js"><link rel="prefetch" href="/assets/js/87.00755e79.js"><link rel="prefetch" href="/assets/js/88.00604a67.js"><link rel="prefetch" href="/assets/js/89.376832c9.js"><link rel="prefetch" href="/assets/js/9.b83e9e02.js"><link rel="prefetch" href="/assets/js/90.9be39541.js"><link rel="prefetch" href="/assets/js/91.d5eb29c9.js"><link rel="prefetch" href="/assets/js/92.9f5fba68.js"><link rel="prefetch" href="/assets/js/93.670dcf5c.js"><link rel="prefetch" href="/assets/js/94.9d783387.js"><link rel="prefetch" href="/assets/js/95.0fd08cc1.js"><link rel="prefetch" href="/assets/js/96.ae0eb4f1.js"><link rel="prefetch" href="/assets/js/97.1d15ea38.js"><link rel="prefetch" href="/assets/js/98.1bc97ef6.js"><link rel="prefetch" href="/assets/js/99.d91a7a9f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f0b7ee7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./favicon.jpg" alt="ゼロツー" class="logo"> <span class="site-name can-hide">ゼロツー</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/frontend/mobile/" class="nav-link">
  移动端
</a></li><li class="dropdown-item"><!----> <a href="/frontend/ts/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/node/" class="nav-link">
  NODE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/native/" class="nav-link">
  原生开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其余" class="dropdown-title"><span class="title">其余</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/computerNetwork/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/frontend/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend/performance/" class="nav-link">
  性能
</a></li><li class="dropdown-item"><!----> <a href="/frontend/safety/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/frontend/axios/" class="nav-link">
  axios
</a></li><li class="dropdown-item"><!----> <a href="/frontend/API/" class="nav-link">
  api
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码" class="dropdown-title"><span class="title">代码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/code/" class="nav-link">
  手写源码
</a></li><li class="dropdown-item"><!----> <a href="/frontend/algorithm/" class="nav-link">
  编码和算法
</a></li><li class="dropdown-item"><!----> <a href="/frontend/leetcode/" class="nav-link">
  leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/others/" class="nav-link">
  开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/" class="nav-link">
  os
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  md
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/view/" class="nav-link">
  view
</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">
  server
</a></li><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  guide
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/vue/" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/frontend/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/frontend/mobile/" class="nav-link">
  移动端
</a></li><li class="dropdown-item"><!----> <a href="/frontend/ts/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/node/" class="nav-link">
  NODE
</a></li><li class="dropdown-item"><!----> <a href="/frontend/native/" class="nav-link">
  原生开发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其余" class="dropdown-title"><span class="title">其余</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/computerNetwork/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/frontend/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend/performance/" class="nav-link">
  性能
</a></li><li class="dropdown-item"><!----> <a href="/frontend/safety/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/frontend/axios/" class="nav-link">
  axios
</a></li><li class="dropdown-item"><!----> <a href="/frontend/API/" class="nav-link">
  api
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码" class="dropdown-title"><span class="title">代码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/code/" class="nav-link">
  手写源码
</a></li><li class="dropdown-item"><!----> <a href="/frontend/algorithm/" class="nav-link">
  编码和算法
</a></li><li class="dropdown-item"><!----> <a href="/frontend/leetcode/" class="nav-link">
  leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/others/" class="nav-link">
  开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/" class="nav-link">
  os
</a></li><li class="dropdown-item"><!----> <a href="/markdown/" class="nav-link">
  md
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/view/" class="nav-link">
  view
</a></li><li class="dropdown-item"><!----> <a href="/server/" class="nav-link">
  server
</a></li><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  guide
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/js/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/frontend/js/array.html" class="sidebar-link">数组</a></li><li><a href="/frontend/js/async.html" class="sidebar-link">异步</a></li><li><a href="/frontend/js/copy.html" class="sidebar-link">拷贝</a></li><li><a href="/frontend/js/crossOrigin.html" aria-current="page" class="active sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#同源协议" class="sidebar-link">同源协议</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#哪些情况会发生跨域" class="sidebar-link">哪些情况会发生跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#cookie跨域" class="sidebar-link">cookie跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#localstorage跨域" class="sidebar-link">LocalStorage跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#img-标签跨域" class="sidebar-link">img 标签跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#解决跨域的措施" class="sidebar-link">解决跨域的措施</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#通过jsonp跨域" class="sidebar-link">通过jsonp跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#location-hash-iframe" class="sidebar-link">location.hash + iframe</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#postmessage跨域" class="sidebar-link">postMessage跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#跨域资源共享（cors）" class="sidebar-link">跨域资源共享（CORS）⭐️</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#nginx代理跨域" class="sidebar-link">nginx代理跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#nodejs中间件代理跨域" class="sidebar-link">Nodejs中间件代理跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#websocket协议跨域" class="sidebar-link">WebSocket协议跨域</a></li><li class="sidebar-sub-header"><a href="/frontend/js/crossOrigin.html#不受同源策略影响" class="sidebar-link">不受同源策略影响</a></li></ul></li><li><a href="/frontend/js/data.html" class="sidebar-link">数据类型</a></li><li><a href="/frontend/js/documentNodeRef.html" class="sidebar-link">Document 和 Element 文档</a></li><li><a href="/frontend/js/dom.html" class="sidebar-link">DOM</a></li><li><a href="/frontend/js/domRef.html" class="sidebar-link">DOM接口文档</a></li><li><a href="/frontend/js/es6.html" class="sidebar-link">ES6</a></li><li><a href="/frontend/js/es6-data.html" class="sidebar-link">ES6 数据类型扩展</a></li><li><a href="/frontend/js/es6-object.html" class="sidebar-link">ES6对象扩展</a></li><li><a href="/frontend/js/es6-ref.html" class="sidebar-link">ES6 文档</a></li><li><a href="/frontend/js/es6-setAndMapRef.html" class="sidebar-link">ES6 Set and Map</a></li><li><a href="/frontend/js/event.html" class="sidebar-link">DOM事件</a></li><li><a href="/frontend/js/extension.html" class="sidebar-link">继承</a></li><li><a href="/frontend/js/function.html" class="sidebar-link">函数</a></li><li><a href="/frontend/js/js.html" class="sidebar-link">基础</a></li><li><a href="/frontend/js/module.html" class="sidebar-link">模块化</a></li><li><a href="/frontend/js/object.html" class="sidebar-link">对象</a></li><li><a href="/frontend/js/prototype.html" class="sidebar-link">原型</a></li><li><a href="/frontend/js/q.html" class="sidebar-link">一些输出问题</a></li><li><a href="/frontend/js/regexp.html" class="sidebar-link">正则表达式</a></li><li><a href="/frontend/js/thread.html" class="sidebar-link">多线程</a></li><li><a href="/frontend/js/window.html" class="sidebar-link">浏览器对象</a></li><li><a href="/frontend/js/xhr.html" class="sidebar-link">网络请求</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="同源协议"><a href="#同源协议" class="header-anchor">#</a> 同源协议</h2> <p>所谓同源是指 &quot;协议 +域名 +端口(可以忽略) &quot;三者相同。</p> <p><strong>标准规定端口不同的网址不是同源，但是浏览器没有遵守这条规定。</strong></p> <p><strong>实际上，同一个网域的不同端口，是可以互相读取 Cookie 的。</strong></p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>主域相同，子域不同时不允许通信</p> <p>域名和域名对应的ip也不允许通信</p></div> <h3 id="目的和原因"><a href="#目的和原因" class="header-anchor">#</a> 目的和原因</h3> <p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。</p> <p>设想这样一种情况：A 网站是一家银行，用户登录以后，A 网站在用户的机器上设置了一个 Cookie，包含了一些隐私信息。</p> <p>用户离开 A 网站以后，又去访问 B 网站，如果没有同源限制，B 网站可以读取 A 网站的 Cookie，那么隐私就泄漏了。</p> <p>更可怕的是，Cookie 往往用来保存用户的登录状态，如果用户没有退出登录，其他网站就可以冒充用户，为所欲为。</p> <p><strong>浏览器同时还规定，提交表单不受同源政策的限制。</strong></p> <p>由此可见，同源政策是必需的，否则 Cookie 可以共享，互联网就毫无安全可言了</p> <h3 id="限制范围"><a href="#限制范围" class="header-anchor">#</a> 限制范围</h3> <p>目前，如果非同源，共有三种行为受到限制。</p> <ul><li><p>无法读取非同源网页的 Cookie、LocalStorage 和 IndexedDB。</p></li> <li><p>无法接触非同源网页的 DOM。</p></li> <li><p>无法向非同源地址发送 AJAX 请求（可以发送，但浏览器会拒绝接受响应）。</p></li></ul> <p>通过 JavaScript 脚本可以拿到其他窗口的window对象。</p> <p>如果是非同源的网页，目前允许一个窗口可以接触其他网页的window对象的九个属性和四个方法。</p> <ul><li>window.closed</li> <li>window.frames</li> <li>window.length</li> <li>window.location</li> <li>window.opener</li> <li>window.parent</li> <li>window.self</li> <li>window.top</li> <li>window.window</li> <li>window.blur()</li> <li>window.close()</li> <li>window.focus()</li> <li>window.postMessage()</li></ul> <p>上面的九个属性之中，只有window.location是可读写的，其他八个全部都是只读。</p> <p>而且，即使是location对象，非同源的情况下，也只允许调用location.replace()方法和写入location.href属性。</p> <h2 id="哪些情况会发生跨域"><a href="#哪些情况会发生跨域" class="header-anchor">#</a> 哪些情况会发生跨域</h2> <ul><li>ajax</li> <li>cookie</li> <li>iframe</li> <li>LocalStorage</li></ul> <h2 id="cookie跨域"><a href="#cookie跨域" class="header-anchor">#</a> cookie跨域</h2> <p><strong>如果两个网页一级域名相同，只是次级域名不同，浏览器允许通过设置document.domain共享 Cookie。</strong></p> <p>因为浏览器通过document.domain属性来检查是否同源。两个网页都需要设置document.domain属性，才能达到同源的目的。</p> <p>因为设置document.domain的同时，会把端口重置为null，因此如果只设置一个网页的document.domain，会导致两个网址的端口不同，还是达不到同源的目的。</p> <p><strong>只适用于 Cookie 和 iframe 窗口，LocalStorage 和 IndexedDB 无法通过这种方法</strong></p> <h3 id="qq-com和b-qq-com之间可以访问cookie吗？"><a href="#qq-com和b-qq-com之间可以访问cookie吗？" class="header-anchor">#</a> qq.com和b.qq.com之间可以访问cookie吗？</h3> <p>可以访问</p> <h2 id="localstorage跨域"><a href="#localstorage跨域" class="header-anchor">#</a> LocalStorage跨域</h2> <p>通过window.postMessage，可以读写其他窗口的 LocalStorage</p> <h2 id="img-标签跨域"><a href="#img-标签跨域" class="header-anchor">#</a> img 标签跨域</h2> <p>因为src请求资源不属于同源策略，所以一般可以用来做埋点，比如监听网页的PV(Page View)，UV(Unique Visitor)。</p> <blockquote><p>不需要管会返回成功还是失败,因为 img只能单向发送get请求，不可访问响应内容（只是展现）所以刚刚好</p></blockquote> <h3 id="服务端向服务端请求会产生跨域吗？"><a href="#服务端向服务端请求会产生跨域吗？" class="header-anchor">#</a> 服务端向服务端请求会产生跨域吗？</h3> <p>浏览器基于安全方面的考虑，引入同源策略(same-origin policy)，非同源情况下，浏览器会将服务端返回的结果拦截掉。</p> <p><strong>同源策略是浏览器需要遵循的标准，而如果是服务器向服务器请求就无需遵循同源策略</strong></p> <h2 id="解决跨域的措施"><a href="#解决跨域的措施" class="header-anchor">#</a> 解决跨域的措施</h2> <ul><li><p>jsonp跨域</p></li> <li><p>document.domain + iframe跨域</p> <p>只有在主域相同的时候才能使用该方法</p></li> <li><p>location.hash + iframe</p> <p>利用location.hash来进行传值</p></li> <li><p>window.name + iframe跨域</p> <p>name 值在不同的页面（甚至不同域名）加载后依旧存在，并且可以支持非常长的 name 值（2MB）</p></li> <li><p>postMessage跨域</p></li> <li><p>跨域资源共享（CORS）</p> <p>推荐使用</p></li> <li><p>nginx代理跨域</p></li> <li><p>nodejs中间件代理跨域</p></li> <li><p>WebSocket协议跨域</p> <p>同源策略对web sockets不适用</p></li></ul> <h2 id="通过jsonp跨域"><a href="#通过jsonp跨域" class="header-anchor">#</a> 通过jsonp跨域</h2> <p>JSONP 是服务器与客户端跨源通信的常用方法。最大特点就是简单易用，没有兼容性问题，老式浏览器全部支持，服务端改造非常小。</p> <p>步骤如下：</p> <ol><li>网页添加一个script元素，向服务器请求一个脚本，这不受同源政策限制，可以跨域请求。</li></ol> <p><code>&lt;script src=&quot;http://api.foo.com?callback=bar&quot;&gt;&lt;/script&gt;</code></p> <p><strong>请求的脚本网址有一个callback参数（?callback=bar），用来告诉服务器，客户端的回调函数名称（bar）。</strong></p> <ol start="2"><li><p><strong>服务器收到请求后，拼接一个字符串，将 JSON 数据放在函数名里面，作为字符串返回（bar({...})）。</strong></p></li> <li><p>客户端会将服务器返回的字符串，作为代码解析，因为浏览器认为，这是script标签请求的脚本内容。</p></li> <li><p>这时，客户端只要定义了bar()函数，就能在该函数体内，拿到服务器返回的 JSON 数据。</p></li></ol> <p>由于script元素请求的脚本，直接作为代码运行。这时，只要浏览器定义了回调函数，该函数就会立即调用。</p> <p><strong>作为参数的 JSON 数据被视为 JavaScript 对象，而不是字符串，因此避免了使用JSON.parse的步骤</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">说明</p> <p>听说很少使用了，在这里单纯提及一下。</p></div> <h3 id="缺陷"><a href="#缺陷" class="header-anchor">#</a> 缺陷</h3> <ul><li>JSONP 只能发GET请求</li></ul> <h3 id="如何防止其他人使用-jsonp-或者-跨域请求接口"><a href="#如何防止其他人使用-jsonp-或者-跨域请求接口" class="header-anchor">#</a> 如何防止其他人使用 jsonp 或者 跨域请求接口</h3> <p>做 Referer 校验和 Token 校验。</p> <p>HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器请求是从哪个页面链接过来的，服务器基此可以获得一些信息用于处理。通过对header中的访问发起者的来源进行验证来保证安全性。</p> <p>但是Referer是存在被绕过的可能的，即可以“不发送Referer”，比如：</p> <ul><li>使用data URI方案</li> <li>从HTTPS向HTTP发起请求</li></ul> <p>Token 主要是指能代表用户身份的标识</p> <p>虽然也可以破解，但是破解的难度较高，通过在运行非同源跨域的网站植入恶意代码，间接依靠“白名单”站点来获取Token发起跨域访问，可以同时绕过Referer和Token的，但是植入恶意代码的难度较高。</p> <h3 id="jsonp里的回调如何执行"><a href="#jsonp里的回调如何执行" class="header-anchor">#</a> JSONP里的回调如何执行</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//客户端，src为请求地址</span>
<span class="token keyword">function</span> <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token string">'http://example.com/ip?callback=foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'response data: '</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>                      
    
<span class="token comment">//服务端</span>
<span class="token comment">//服务端对应的接口在返回参数外面添加函数包裹层</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;testData&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     
</code></pre></div><h2 id="location-hash-iframe"><a href="#location-hash-iframe" class="header-anchor">#</a> location.hash + iframe</h2> <p>片段标识符（fragment identifier）指的是，URL 的#号后面的部分</p> <p>如果只是改变片段标识符，页面不会重新刷新。</p> <p>父窗口可以把信息，写入子窗口的片段标识符。</p> <p>子窗口通过监听hashchange事件得到通知。</p> <h2 id="postmessage跨域"><a href="#postmessage跨域" class="header-anchor">#</a> postMessage跨域</h2> <p>HTML5 引入了一个全新的API：跨文档通信 API（Cross-document messaging）</p> <p>该API 为window对象新增了一个window.postMessage方法，允许跨窗口通信，不论这两个窗口是否同源。</p> <p>举例来说，父窗口aaa.com向子窗口bbb.com发消息，调用postMessage方法就可以了。</p> <p>postMessage方法的第一个参数是具体的信息内容，</p> <p>第二个参数是接收消息的窗口的源（origin），即“协议 + 域名 + 端口”。也可以设为*，表示不限制域名，向所有窗口发送。</p> <p>子窗口向父窗口发送消息的写法类似。</p> <p>父窗口和子窗口都可以通过message事件，监听对方的消息</p> <p>message事件的参数是事件对象event，提供以下三个属性。</p> <ul><li>event.source：发送消息的窗口</li> <li>event.origin: 消息发向的网址</li> <li>event.data: 消息内容</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发送端</span>
<span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> frame <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'frame'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获取iframe中的窗口,给iframe里嵌入的window发消息</span>
    frame<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token string">'http://localhost:4000'</span><span class="token punctuation">)</span>
    <span class="token comment">// 接收b.html回过来的消息</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//接收端</span>
<span class="token comment">//监听发送端发来的消息</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token comment">//给发送源回消息</span>
    e<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'nice to meet you'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>origin<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="跨域资源共享（cors）"><a href="#跨域资源共享（cors）" class="header-anchor">#</a> 跨域资源共享（CORS）⭐️</h2> <p>CORS 是一个 W3C 标准，全称是“跨域资源共享”（Cross-origin resource sharing）。</p> <p>它允许浏览器向跨域的服务器，发出XMLHttpRequest请求，从而克服了 AJAX 只能同源使用的限制</p> <p><strong>CORS 需要浏览器和服务器同时支持</strong></p> <p>CORS 请求分成两类：简单请求（simple request）和非简单请求（not-so-simple request）。</p> <p><img src="/img/3236727274-5a37338316b31.png" alt="流程"></p> <h3 id="简单请求"><a href="#简单请求" class="header-anchor">#</a> 简单请求</h3> <p>只要同时满足以下两大条件，就属于简单请求。</p> <ol><li><p>请求方法是以下三种方法之一。</p> <ul><li><strong>HEAD</strong></li> <li>GET</li> <li>POST</li></ul></li> <li><p>HTTP 的头信息不超出以下几种字段。</p> <ul><li>Accept</li> <li>Accept-Language</li> <li>Content-Language</li> <li><strong>Last-Event-ID</strong></li> <li><strong>Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain</strong></li></ul></li></ol> <p>表单在历史上一直可以跨域发出请求。简单请求就是表单请求，浏览器沿袭了传统的处理方式</p> <p><strong>对于简单请求，浏览器直接发出 CORS 请求。具体来说，就是在头信息之中，增加一个Origin字段</strong></p> <blockquote><p>Origin字段用来说明，本次请求来自哪个域（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求。</p></blockquote> <p>如果Origin指定的源，不在许可范围内，服务器会返回一个正常的 HTTP 回应。</p> <p>浏览器发现，<strong>回应的头信息没有包含Access-Control-Allow-Origin字段，就知道出错了</strong>，从而抛出一个错误，被XMLHttpRequest的onerror回调函数捕获。</p> <p><strong>注意，这种错误无法通过状态码识别，因为 HTTP 回应的状态码有可能是200。</strong></p> <p>如果Origin指定的域名在许可范围内，服务器返回的响应，会多出几个头信息字段。</p> <ul><li><p>Access-Control-Allow-Origin</p> <p>该字段是必须的。它的值要么是请求时Origin字段的值，要么是一个*，表示接受任意域名的请求。</p></li> <li><p>Access-Control-Allow-Credentials</p> <p>该字段可选。它的值是一个布尔值，表示是否允许发送 Cookie。</p> <p>默认情况下，Cookie 不包括在 CORS 请求之中。设为true，即表示服务器明确许可，浏览器可以把 Cookie 包含在请求中，一起发给服务器。</p> <blockquote><p>同时，必须在 AJAX 请求中打开withCredentials属性。</p></blockquote> <p>这个值也只能设为true，如果服务器不要浏览器发送 Cookie，不发送该字段即可。</p> <p>Cookie 依然遵循同源政策</p></li> <li><p>Access-Control-Expose-Headers(该字段可选。)</p> <p>CORS 请求时，XMLHttpRequest对象的getResponseHeader()方法只能拿到6个服务器返回的基本字段：</p> <ul><li>Cache-Control</li> <li>Content-Language</li> <li>Content-Type</li> <li>Expires</li> <li>Last-Modified</li> <li>Pragma。</li></ul> <p>如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定。</p></li></ul> <h3 id="非简单请求"><a href="#非简单请求" class="header-anchor">#</a> 非简单请求</h3> <p>非简单请求是那种对服务器提出特殊要求的请求</p> <blockquote><p>比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json。</p></blockquote> <h4 id="预检请求"><a href="#预检请求" class="header-anchor">#</a> 预检请求</h4> <p>非简单请求的 CORS 请求，会在正式通信之前，增加一次 HTTP 查询请求，称为“预检”请求（preflight）。</p> <p><strong>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP 方法和头信息字段。</strong></p> <p>只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。</p> <p>这是为了防止这些新增的请求，对传统的没有 CORS 支持的服务器形成压力，给服务器一个提前拒绝的机会</p> <p><strong>预检请求用的请求方法是OPTIONS，表示这个请求是用来询问的。</strong></p> <p>头信息里面，关键字段是Origin，表示请求来自哪个源。</p> <p>除了Origin字段，“预检”请求的头信息包括两个特殊字段。</p> <ul><li><p>Access-Control-Request-Method</p> <p>该字段是必须的，用来列出浏览器的 CORS 请求会用到哪些 HTTP 方法</p></li> <li><p>Access-Control-Request-Headers</p> <p>该字段是一个逗号分隔的字符串，指定浏览器 CORS 请求会额外发送的头信息字段</p></li></ul> <p>如果服务器否定了“预检”请求，会返回一个正常的 HTTP 回应（返回200），但是没有任何 CORS 相关的头信息字段，或者明确表示请求不符合条件。</p> <p>这时，浏览器就会认定，服务器不同意预检请求，因此触发一个错误，被XMLHttpRequest对象的onerror回调函数捕获。</p> <p>反之，服务器收到“预检”请求以后，检查了Origin、Access-Control-Request-Method 和 Access-Control-Request-Headers字段以后，确认允许跨源请求（返回200），就会做出回应，包含如下字段：</p> <ul><li><p>Access-Control-Allow-Methods</p> <p>该字段必需，它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。</p> <p><strong>注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次“预检”请求。</strong></p></li> <li><p>Access-Control-Allow-Headers</p> <p>如果浏览器请求包括Access-Control-Request-Headers字段，则Access-Control-Allow-Headers字段是必需的。</p> <p>它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在“预检”中请求的字段。</p></li> <li><p>Access-Control-Allow-Credentials</p> <p>该字段与简单请求时的含义相同。表示是否允许发送cookie</p></li> <li><p>Access-Control-Max-Age</p> <p>该字段可选，用来指定本次预检请求的有效期，单位为秒。即允许缓存该条回应存在多少秒，在此期间，不用发出另一条预检请求。</p></li></ul> <p>一旦服务器通过了“预检”请求，以后每次浏览器正常的 CORS 请求，就都跟简单请求一样，</p> <p>会有一个Origin头信息字段。服务器的回应，也都会有一个Access-Control-Allow-Origin头信息字段。</p> <p>CORS 支持所有类型的 HTTP 请求</p> <h3 id="如果没有响应头，那么数据会返回吗"><a href="#如果没有响应头，那么数据会返回吗" class="header-anchor">#</a> 如果没有响应头，那么数据会返回吗</h3> <p>这些跨站点请求与浏览器发出的其他跨站点请求并无二致。如果服务器未返回正确的响应首部，则请求方不会收到任何数据。</p> <blockquote><p>那些不允许跨站点请求的网站无需为这一新的 HTTP 访问控制特性担心。</p></blockquote> <h2 id="nginx代理跨域"><a href="#nginx代理跨域" class="header-anchor">#</a> nginx代理跨域</h2> <blockquote><p>发音'engine x'</p></blockquote> <p>代理服务器需要做以下几个步骤：</p> <ol><li>接受客户端的请求</li> <li>将请求转发给实际的服务器</li> <li>将服务器的响应结果返回给客户端</li></ol> <h3 id="正向代理和反向代理"><a href="#正向代理和反向代理" class="header-anchor">#</a> 正向代理和反向代理</h3> <ul><li><p>正向代理：</p> <p>是指是一个位于客户端和原始服务器之间的服务器，为了从原始服务器取得内容，</p> <p>客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。</p> <p>客户端才能使用正向代理。</p></li> <li><p>反向代理：</p> <p>是指以代理服务器来接受 Internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 Internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</p></li></ul> <p>简单来说，正向代理，目标服务器不清楚客户端信息，请求是由代理服务器发起。</p> <p>反向代理，客户端不清楚具体是由哪台服务器处理业务</p> <h2 id="nodejs中间件代理跨域"><a href="#nodejs中间件代理跨域" class="header-anchor">#</a> Nodejs中间件代理跨域</h2> <p>NodeJS 中间件 http-proxy-middleware 实现跨域代理，原理大致与 nginx 相同，都是通过一个代理服务器，实现转发</p> <h2 id="websocket协议跨域"><a href="#websocket协议跨域" class="header-anchor">#</a> WebSocket协议跨域</h2> <p>WebSocket 是一种通信协议，使用ws://（非加密）和wss://（加密）作为协议前缀。</p> <p><strong>该协议不实行同源政策，只要服务器支持，就可以通过它进行跨源通信。</strong></p> <p>浏览器发出的 WebSocket 请求的头信息，有一个字段是Origin，表示该请求的请求源（origin），即发自哪个域名。</p> <p>服务器可以根据这个字段，判断是否许可本次通信。</p> <h2 id="不受同源策略影响"><a href="#不受同源策略影响" class="header-anchor">#</a> 不受同源策略影响</h2> <ul><li>script</li> <li>img</li> <li>提交表单</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/js/copy.html" class="prev">
        拷贝
      </a></span> <span class="next"><a href="/frontend/js/data.html">
        数据类型
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.484f4375.js" defer></script><script src="/assets/js/2.ebbe98b4.js" defer></script><script src="/assets/js/54.e2bff3b5.js" defer></script>
  </body>
</html>
